@model ShelvesViewModel
@{
    ViewData["Title"] = "Home Page";
}

<div class="row top-buffer">
    <div class="col-md-3">
    </div>
    <div class="col-md-6">
        @foreach (var shelf in Model.Shelves)
        {
            @Html.Partial("_ShelfPartial", new ShelfViewModel { Shelf = shelf, ShowActions = Model.ShowActions })
        }
    </div>
    <div class="col-md-3">
    </div>
</div>

@section Scripts{ 
    <script>
        $(document).ready(function() {
            $(".js-toggle-star").click(function() {
                var button = $(this);

                $.post({
                    url: "/api/stars",
                    data: { shelfId: button.data("shelf-id") },
                    headers:
                    {
                        RequestVerificationToken: $('input[name="__RequestVerificationToken"]').val()
                    }
                })
                .done(function() {
                    button
                        .removeClass("btn-default")
                        .addClass("btn-warning");
                })
                .fail(function() {
                    swal("Something failed!", "We could not process your request.", "error");
                });
            });
        });
    </script>
}